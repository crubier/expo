{"version":3,"file":"Permissions.js","sourceRoot":"","sources":["../src/Permissions.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,mBAAmB,EAAE,gBAAgB,EAAE,MAAM,wBAAwB,CAAC;AAC/E,OAAO,WAAW,MAAM,mBAAmB,CAAC;AAG5C,OAAO,EAIL,gBAAgB,GAGjB,MAAM,qBAAqB,CAAC;AAE7B,OAAO,EACL,gBAAgB,GAMjB,CAAC;AAEF,MAAM,CAAC,MAAM,MAAM,GAAG,QAAQ,CAAC;AAC/B,MAAM,CAAC,MAAM,WAAW,GAAG,YAAY,CAAC;AACxC,MAAM,CAAC,MAAM,eAAe,GAAG,gBAAgB,CAAC;AAChD,MAAM,CAAC,MAAM,QAAQ,GAAG,UAAU,CAAC;AACnC,MAAM,CAAC,MAAM,yBAAyB,GAAG,yBAAyB,CAAC;AACnE,MAAM,CAAC,MAAM,aAAa,GAAG,eAAe,CAAC;AAC7C,MAAM,CAAC,MAAM,QAAQ,GAAG,UAAU,CAAC;AACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,UAAU,CAAC;AACnC,MAAM,CAAC,MAAM,SAAS,GAAG,WAAW,CAAC;AACrC,MAAM,CAAC,MAAM,iBAAiB,GAAG,kBAAkB,CAAC;AAEpD,MAAM,CAAC,KAAK,UAAU,QAAQ,CAAC,GAAG,KAAuB;IACvD,OAAO,MAAM,mCAAmC,CAAC,KAAK,EAAE,WAAW,CAAC,QAAQ,CAAC,CAAC;AAChF,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,QAAQ,CAAC,GAAG,KAAuB;IACvD,OAAO,MAAM,mCAAmC,CAAC,KAAK,EAAE,WAAW,CAAC,QAAQ,CAAC,CAAC;AAChF,CAAC;AAED,KAAK,UAAU,mCAAmC,CAChD,IAAoB,EACpB,gBAAmE;IAEnE,OAAO,gBAAgB,CAAC,IAAI,CAAC,CAAC;AAChC,CAAC;AAED,KAAK,UAAU,mCAAmC,CAChD,KAAuB,EACvB,gBAAmE;IAEnE,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;QACjB,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;KACnE;IAED,OAAO,MAAM,OAAO,CAAC,GAAG,CACtB,KAAK,CAAC,GAAG,CAAC,KAAK,EAAC,IAAI,EAAC,EAAE,CAAC,CAAC;QACvB,CAAC,IAAI,CAAC,EAAE,MAAM,mCAAmC,CAAC,IAAI,EAAE,gBAAgB,CAAC;KAC1E,CAAC,CAAC,CACJ;SACE,IAAI,CAAC,WAAW,CAAC,EAAE,CAClB,WAAW,CAAC,MAAM,CAAC,CAAC,UAAU,EAAE,GAAG,EAAE,EAAE;QACrC,OAAO,EAAE,GAAG,GAAG,EAAE,GAAG,UAAU,EAAE,CAAC;IACnC,CAAC,EAAE,EAAE,CAAC,CACP;SACA,IAAI,CAAC,WAAW,CAAC,EAAE;QAClB,OAAO;YACL,MAAM,EAAE,gBAAgB,CAAC,WAAW,CAAC;YACrC,OAAO,EAAE,mBAAmB,CAAC,WAAW,CAAC;YACzC,WAAW,EAAE,EAAE,GAAG,WAAW,EAAE;SAChC,CAAC;IACJ,CAAC,CAAC,CAAC;AACP,CAAC","sourcesContent":["import { coalesceExpirations, coalesceStatuses } from './CoalescedPermissions';\nimport Permissions from './ExpoPermissions';\nimport { Platform } from 'react-native';\n\nimport {\n  PermissionResponse,\n  PermissionType,\n  PermissionMap,\n  PermissionStatus,\n  PermissionExpiration,\n  PermissionInfo,\n} from './Permissions.types';\n\nexport {\n  PermissionStatus,\n  PermissionResponse,\n  PermissionExpiration,\n  PermissionMap,\n  PermissionInfo,\n  PermissionType,\n};\n\nexport const CAMERA = 'camera';\nexport const CAMERA_ROLL = 'cameraRoll';\nexport const AUDIO_RECORDING = 'audioRecording';\nexport const LOCATION = 'location';\nexport const USER_FACING_NOTIFICATIONS = 'userFacingNotifications';\nexport const NOTIFICATIONS = 'notifications';\nexport const CONTACTS = 'contacts';\nexport const CALENDAR = 'calendar';\nexport const REMINDERS = 'reminders';\nexport const SYSTEM_BRIGHTNESS = 'systemBrightness';\n\nexport async function getAsync(...types: PermissionType[]): Promise<PermissionResponse> {\n  return await _handleMultiPermissionsRequestAsync(types, Permissions.getAsync);\n}\n\nexport async function askAsync(...types: PermissionType[]): Promise<PermissionResponse> {\n  return await _handleMultiPermissionsRequestAsync(types, Permissions.askAsync);\n}\n\nasync function _handleSinglePermissionRequestAsync(\n  type: PermissionType,\n  handlePermission: (type: PermissionType) => Promise<PermissionInfo>\n): Promise<PermissionInfo> {\n  return handlePermission(type);\n}\n\nasync function _handleMultiPermissionsRequestAsync(\n  types: PermissionType[],\n  handlePermission: (type: PermissionType) => Promise<PermissionInfo>\n): Promise<any> {\n  if (!types.length) {\n    throw new Error('At least one permission type must be specified');\n  }\n\n  return await Promise.all(\n    types.map(async type => ({\n      [type]: await _handleSinglePermissionRequestAsync(type, handlePermission),\n    }))\n  )\n    .then(permissions =>\n      permissions.reduce((permission, acc) => {\n        return { ...acc, ...permission };\n      }, {})\n    )\n    .then(permissions => {\n      return {\n        status: coalesceStatuses(permissions),\n        expires: coalesceExpirations(permissions),\n        permissions: { ...permissions },\n      };\n    });\n}\n"]}